(function(t){"use strict";t.compile=r;function r(r,n){r=t.parse(r,n);r=t.build(r,n);r=Function("return "+r)();return t.render(r,n)}t.build=n;function n(r,n){var t=n&&n.es5;var e=t?"function(T){return ":"T=>";var i=t?"}":"";return c(r);function c(r){return e+a(r.c)+i}function a(r){return r.map(f).join("+")||'""'}function f(r){if(r.t){return o(r.t)}if(!("v"in r)&&r.c){return a(r.c)}var n=0;var t=r.v;var e=t&&t[0];var i=e==="."&&t.length>1;var f=e===">";if(i||f)t=t.substr(1);if(!r.p&&!f)n|=1;if(!i)n|=2;if(!r.u&&!r.s&&!r.i&&!r.p)n|=4;if(r.s)n|=8;if(r.i)n|=16;var u="T("+o(t)+","+n;if(r.c&&r.c.length){u+=","+c(r)}u+=")";return u}}var e={"\t":"\\t","\n":"\\n","\r":"\\r","'":"\\'","\\":"\\\\"};function i(r){var n=r.charCodeAt(0);return e[r]||(n<16?"\\x0":"\\x")+n.toString(16).toUpperCase()}function o(r){return"'"+(r?r.replace(/([\x00-\x1F'\\])/g,i):"")+"'"}t.parse=E;function E(i,f){var t={"&":b,"/":x,"!":m,"^":$,">":w,"#":y,"{":d};var r={"/":1,"!":1,"^":1,">":1,"#":1};var n="{{([^{}]*|{[^{}]*})}}";var e=[{c:[]}];var u=f&&f.tag;i+="";if(!u){i.replace(/{{=(.*?)=}}/,function(r,n,t){var e=i.substr(0,t);i=i.substr(t+r.length);if(e.search(/(^|\n)[ \t]*$/)>-1&&i.search(/^[ \t]*(\r?\n|$)/)>-1){e=e.replace(/[ \t]*$/,"");i=i.replace(/^[ \t]*\r?\n?/,"")}if(e)p(E(e,f));u=C(n)})}if(u){u=u.replace(/[!-.?\[-\]{-}]/g,function(r){return"\\x"+r.charCodeAt(0).toString(16)});n=u.replace(/\s+/,"(.*?)")}var c=i.split(new RegExp(n));var a=c.length;for(var o=a-2;o>0;o-=2){var s=c[o-1];var v=c[o+1];var l=r[c[o][0]]&&(o===1?s.search(/(^|\n)[ \t]*$/)>-1:s.search(/\n[ \t]*$/)>-1)&&(o===a-2?v.search(/^[ \t]*(\r?\n|$)/)>-1:v.search(/^[ \t]*\r?\n/)>-1);if(l){c[o-1]=s.replace(/[ \t]*$/,"");c[o+1]=v.replace(/^[ \t]*\r?\n?/,"")}}c.forEach(function(r,n){if(n&1){g(r)}else{h(r)}});if(e.length>1){throw new Error("missing closing tag: "+e[0].v)}return e[0];function p(r,n){e[0].c.push(r);if(n){r.c=[];e.unshift(r)}}function h(r){if(r)p({t:r})}function g(r){var n=t[r[0]];if(n){n(C(r.substr(1)))}else{A(C(r))}}function b(r){p({v:r,u:1})}function d(r){return b(C(r.substr(0,r.length-1)))}function w(r){p({v:r,p:1})}function y(r){p({v:r,s:1},1)}function $(r){p({v:r,i:1},1)}function x(r){if(!e.length){throw new Error("Closing tag without opener: "+r)}var n=e[0].v;if(n!==r){throw new Error("Nesting error: "+n+" vs. "+r)}e.shift()}function A(r){p({v:r})}function m(){}}function C(r){return r.replace(/^\s+/,"").replace(/\s+$/,"")}t.render=v;function v(n){return r;function r(o,s){return n(r);function r(r,n,t){var e;if(!n)return r;if(n&3){if(r==="."){r=o}else{var i,f;var u=r.split(".");var c=u.length;r="";if(n&1){r=o;for(f=0;r&&f<c;f++){i=r;r=r[u[f]]}}if(n&2&&!r){r=s;for(f=0;r&&f<c;f++){i=r;r=r[u[f]]}}if("function"===typeof r){r=r.call(i,o,s)}}}if(n&8){if(Array.isArray(r)){r=r.map(a).join("")}else{r=r?a("object"===typeof r?r:o):""}}if(n&16){r=!r||Array.isArray(r)&&!r.length?a(o):""}if(r==null)r="";if("string"!==typeof r)r+="";if(n&4){r=r.replace(/[<"&>]/g,l)}return r;function a(r){if(!t)return"";if(!e)e=v(t);return e(r,s)}}}}var f={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;"};function i(r){return f[r]}function l(r){return r.replace(/[<"&>]/g,i)}})(typeof tustache=="undefined"?tustache={}:tustache);